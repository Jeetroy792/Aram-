# ğ–¥ğ—‚ğ—…ğ–¾: ğ—‚ğ—‡ğ—‚ğ—_ğ–¼ğ—ğ–ºğ—‡ğ—‡ğ–¾ğ—….ğ—‰ğ—’
# ğ–£ğ–¾ğ—Œğ—‚ğ—€ğ—‡ğ–¾ğ–½ ğ–¿ğ—ˆğ—‹: ğ–¬ğ–ºğ—Œğ—ğ–¾r ğ–©ğ–¾ğ–¾ğ— [ğ–¤ğ—…ğ—‚ğ—ğ–¾ ğ–¤ğ—‡ğ–¼ğ—ˆğ–½ğ–¾ğ—‹ ğ–·ğŸ«]

import asyncio
from pyrogram import Client
from config import Config
from pyrogram.errors import ChannelInvalid, ChannelPrivate, ChatAdminRequired

class InitChannel:
    @staticmethod
    async def setup(client: Client):
        """
        à¦œà¦¿à§, à¦à¦Ÿà¦¿ à¦šà§‡à¦• à¦•à¦°à¦¬à§‡ à¦¤à§‹à¦®à¦¾à¦° à¦²à¦— à¦šà§à¦¯à¦¾à¦¨à§‡à¦²à¦Ÿà¦¿ à¦¬à¦Ÿà§‡à¦° à¦¸à¦¾à¦¥à§‡ 
        à¦¸à¦ à¦¿à¦•à¦­à¦¾à¦¬à§‡ à¦¯à§à¦•à§à¦¤ à¦†à¦›à§‡ à¦•à¦¿à¦¨à¦¾ à¦à¦¬à¦‚ à¦¬à¦Ÿ à¦¸à§‡à¦–à¦¾à¦¨à§‡ à¦…à§à¦¯à¦¾à¦¡à¦®à¦¿à¦¨ à¦•à¦¿à¦¨à¦¾à¥¤
        """
        print("ğŸ” ğ–¨ğ—‡ğ—‚ğ—ğ—‚ğ–ºğ—…ğ—‚ğ—“ğ—‚ğ—‡ğ—€ ğ–«ğ—ˆğ—€ ğ–¢ğ—ğ–ºğ—‡ğ—‡ğ–¾ğ—…...")
        
        if not Config.LOG_CHANNEL:
            print("âš ï¸ ğ–¶ğ–ºğ—‹ğ—‡ğ—‚ğ—‡ğ—€: ğ–«ğ–®ğ–¦_ğ–¢ğ–§ğ– ğ–­ğ–­ğ–¤ğ–« ğ–¨ğ–£ ğ—‚ğ—Œ ğ—†ğ—‚ğ—Œğ—Œğ—‚ğ—‡ğ—€!")
            return

        try:
            # à¦šà§à¦¯à¦¾à¦¨à§‡à¦²à¦Ÿà¦¿ à¦šà§‡à¦• à¦•à¦°à¦¾ à¦¹à¦šà§à¦›à§‡
            chat = await client.get_chat(Config.LOG_CHANNEL)
            
            # à¦¬à¦Ÿ à¦•à¦¿ à¦…à§à¦¯à¦¾à¦¡à¦®à¦¿à¦¨?
            member = await chat.get_member("me")
            if not member.privileges.can_post_messages:
                print("âŒ ğ–¤ğ—‹ğ—‹ğ—ˆğ—‹: ğ–¡ğ—ˆğ— ğ—‡ğ–¾ğ–¾ğ–½ğ—Œ 'ğ–¯ğ—ˆğ—Œğ— ğ–¬ğ–¾ğ—Œğ—Œğ–ºğ—€ğ–¾ğ—Œ' ğ—‰ğ–¾ğ—‹ğ—†ğ—‚ğ—Œğ—Œğ—‚ğ—ˆğ—‡ ğ—‚ğ—‡ ğ–«ğ—ˆğ—€ ğ–¢ğ—ğ–ºğ—‡ğ—‡ğ–¾ğ—…!")
                return

            print(f"âœ… ğ–«ğ—ˆğ—€ ğ–¢ğ—ğ–ºğ—‡ğ—‡ğ–¾ğ—… ğ–«ğ—‚ğ—‡ğ—„ğ–¾ğ–½: {chat.title}")
            
            # à¦¬à¦Ÿà§‡à¦° à¦¸à§à¦Ÿà¦¾à¦°à§à¦Ÿ-à¦†à¦ª à¦®à§‡à¦¸à§‡à¦œ à¦ªà¦¾à¦ à¦¾à¦¨à§‹
            await client.send_message(
                Config.LOG_CHANNEL,
                "ğŸš€ **ğ–¤ğ—…ğ—‚ğ—ğ–¾ ğ–¤ğ—‡ğ–¼ğ—ˆğ–½ğ–¾ğ—‹ ğ–·ğŸ« ğ—‚ğ—Œ ğ–«ğ—‚ğ—ğ–¾!**\n\n"
                "âœ¨ **ğ–²ğ—ğ–ºğ—ğ—ğ—Œ:** `ğ–®ğ—‡ğ—…ğ—‚ğ—‡ğ–¾`\n"
                "âš™ï¸ **ğ–¤ğ—‡ğ—€ğ—‚ğ—‡ğ–¾:** `ğ–¥ğ–¥ğ—†ğ—‰ğ–¾ğ—€ ğ–¯ğ—‹ğ—ˆ`\n"
                "ğŸ¤´ **ğ–®ğ—ğ—‡ğ–¾ğ—‹:** [ğ–¬ğ–ºğ—Œğ—ğ–¾ğ—‹ ğ–©ğ–¾ğ–¾ğ—](ğ—.ğ—†ğ–¾/ğ—’ğ—ˆğ—ğ—‹_ğ—ğ—Œğ–¾ğ—‹ğ—‡ğ–ºğ—†ğ–¾)"
            )

        except (ChannelInvalid, ChannelPrivate):
            print("âŒ ğ–¤ğ—‹ğ—‹ğ—ˆğ—‹: ğ–¨ğ—‡ğ—ğ–ºğ—…ğ—‚ğ–½ ğ–«ğ—ˆğ—€ ğ–¢ğ—ğ–ºğ—‡ğ—‡ğ–¾ğ—… ğ–¨ğ–£!")
        except ChatAdminRequired:
            print("âŒ ğ–¤ğ—‹ğ—‹ğ—ˆğ—‹: ğ–¡ğ—ˆğ— ğ—‚ğ—Œ ğ—‡ğ—ˆğ— ğ–ºğ—‡ ğ–ºğ–½ğ—†ğ—‚ğ—‡ ğ—‚ğ—‡ ğ—ğ—ğ–¾ ğ–«ğ—ˆğ—€ ğ–¢ğ—ğ–ºğ—‡ğ—‡ğ–¾ğ—…!")
        except Exception as e:
            print(f"âŒ ğ–´ğ—‡ğ–¾ğ—‘ğ—‰ğ–¾ğ—‰ğ—ğ–¾ğ–½ ğ–¤ğ—‹ğ—‹ğ—ˆğ—‹ ğ—‚ğ—‡ ğ–¨ğ—‡ğ—‚ğ— ğ–¢ğ—ğ–ºğ—‡ğ—‡ğ–¾ğ—…: {e}")

async def send_to_log(client, text, media=None):
    """à¦²à¦— à¦šà§à¦¯à¦¾à¦¨à§‡à¦²à§‡ à¦…à§à¦¯à¦¾à¦•à§à¦Ÿà¦¿à¦­à¦¿à¦Ÿà¦¿ à¦°à¦¿à¦ªà§‹à¦°à§à¦Ÿ à¦ªà¦¾à¦ à¦¾à¦¨à§‹à¦° à¦«à¦¾à¦‚à¦¶à¦¨"""
    try:
        if media:
            await client.send_document(Config.LOG_CHANNEL, document=media, caption=text)
        else:
            await client.send_message(Config.LOG_CHANNEL, text)
    except:
        pass
      
